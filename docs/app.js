window.onload=async function(){await setup(),introAnimate()};const app={viewportWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),breakpoints:[1075,760,460],activePortrait:!1,app:document.querySelector(".app"),frames:document.querySelectorAll(".frame"),buttons:document.querySelectorAll(".button"),portrait:document.querySelector(".frame--portrait"),contentBox:document.querySelector(".content__box"),footer:document.querySelector(".footer"),header:document.querySelector(".header"),content:{},svg:{}},setup=async()=>{app.content=JSON.parse(contentData);const t=await getSVG("lucas"),e=await getSVG("kim"),o=await getSVG("sylvie"),a=await getSVG("figgy"),p=await getSVG("reg"),s=await getSVG("button--work"),i=await getSVG("button--play"),n=await getSVG("button--atme"),r=await getSVG("desk"),l=await getSVG("barbell"),c=await getSVG("bookshelf"),d=await getSVG("contact");app.svg={lucas:t,kim:e,sylvie:o,figgy:a,reg:p,buttons:{work:s,play:i,atme:n},desk:r,barbell:l,bookshelf:c,contact:d},app.content.footer&&(app.content.footer.left&&populateFooter(app.content.footer.left,"left"),app.content.footer.right&&populateFooter(app.content.footer.right,"right")),app.content.header&&(app.header.innerHTML+=app.content.header)},startApp=()=>{app.buttons.forEach(t=>{t.addEventListener("click",handleInitialClick)}),app.header.querySelector(".header__closer").addEventListener("click",closeHeader)},closeHeader=()=>{app.header.style.opacity=0,window.setTimeout(()=>{app.header.remove()},1100)},handleInitialClick=t=>{app.app.classList.add("app--open"),app.viewportWidth<app.breakpoints[2]&&(app.portrait.style.transform="translateY(1500%)"),app.buttons.forEach(t=>{t.removeEventListener("click",handleInitialClick),t.addEventListener("click",handleClick)}),app.viewportWidth<=app.breakpoints[0]&&app.viewportWidth>app.breakpoints[2]&&(document.querySelector("#svg--lucas").style.right="9rem"),window.setTimeout(()=>handleClick(t),500)},handleClick=t=>{const e=app.activePortrait?app.activePortrait:"lucas",o=t.target.id.slice(13);switchPortrait(e,o),app.activePortrait=o,app.buttons.forEach(e=>{e.id===t.target.id?e.classList.add("button--selected"):e.classList.remove("button--selected")}),switchContent(e,o)},populateFooter=(t,e)=>{const o=document.createElement("div");o.classList.add("footer__inner",`footer__inner--${e}`),o.innerHTML=t,app.footer.appendChild(o)},introAnimate=()=>{app.portrait.innerHTML=app.svg.lucas;const t=document.querySelector("#svg--lucas");t.style.position="absolute",t.style.bottom=0,t.style.right=app.viewportWidth<=app.breakpoints[2]?"3rem":app.viewportWidth<=app.breakpoints[0]?"2rem":"-2.5rem",t.style.transition="right .25s linear";const e=document.createElement("div");e.innerText="Hi, I'm Lucas",e.classList.add("hello"),app.app.appendChild(e),window.setTimeout(()=>{e.style.opacity="0"},500),window.setTimeout(()=>{app.app.removeChild(e),app.footer.style.opacity=1,app.header.style.opacity=1},1500),window.setTimeout(()=>{app.portrait.classList.add("frame--in")},250),window.setTimeout(()=>{modSVG("lucas","wave")},2350),window.setTimeout(()=>{modSVG("lucas","defaultArms"),app.viewportWidth>app.breakpoints[0]&&(t.style.right="6rem"),app.buttons[0].innerHTML=app.svg.buttons.work,app.buttons[1].innerHTML=app.svg.buttons.play,app.buttons[2].innerHTML=app.svg.buttons.atme,app.buttons.forEach(t=>t.style.opacity=1),app.buttons.forEach(t=>{t.addEventListener("click",handleInitialClick)}),app.header.querySelector(".header__closer").addEventListener("click",closeHeader)},3100)},switchContent=(t,e)=>{t!==e&&(app.contentBox.style.opacity="0",window.setTimeout(()=>{const t=app.contentBox.firstElementChild;if(t.innerHTML=app.content[e],"atme"===e){const e=document.createElement("div");e.innerHTML=app.svg.contact,t.appendChild(e.firstElementChild)}app.contentBox.style.opacity="1",t.offsetHeight>=app.contentBox.offsetHeight?(app.contentBox.style.overflowY="scroll",app.contentBox.style.alignItems="flex-start"):(app.contentBox.style.overflowY="auto",app.contentBox.style.alignItems="center")},250))},switchPortrait=(t,e)=>{t!==e&&(app.portrait.style.transform="translateY(1500%)",window.setTimeout(()=>{document.querySelectorAll("#portrait > svg").forEach(t=>{t.parentNode.removeChild(t)})},400),window.setTimeout(()=>{let t,o={};const a=app.viewportWidth<=app.breakpoints[2]?2:app.viewportWidth<=app.breakpoints[1]?1:app.viewportWidth<=app.breakpoints[0]&&0;switch(e){case"atme":t=app.svg.reg+app.svg.lucas+app.svg.figgy+app.svg.kim+app.svg.sylvie,o={reg:{position:"absolute",bottom:0,left:0},lucas:{position:"absolute",bottom:0,left:2==a?"15px":"18px"},figgy:{position:"absolute",bottom:0,left:2==a?"98px":"174px"},kim:{position:"absolute",bottom:0,left:2==a?"115px":"200px"},sylvie:{position:"absolute",bottom:0,right:0}};break;case"work":t=app.svg.lucas+app.svg.desk,o={lucas:{position:"absolute",bottom:0,left:2==a?"34px":"95px"},desk:{position:"absolute",bottom:0,left:2==a?"32px":"90px"}};break;case"play":t=app.svg.lucas+app.svg.barbell+app.svg.bookshelf,o={lucas:{position:"absolute",bottom:0,left:2==a?"16px":"32px"},barbell:{position:"absolute",bottom:0,left:2==a?"12px":"24px"},bookshelf:{position:"absolute",bottom:0,right:2==a?"8px":"16px"}};break;default:t=app.svg.lucas,o.lucas={position:"absolute",bottom:0,right:2==a?"47.5px":"95px"}}app.portrait.innerHTML=t,"play"===e&&(modSVG("lucas","workout"),modSVG("lucas","thumbsUp")),document.querySelectorAll("#portrait > svg").forEach(t=>{const e=t.id.slice(5);if(o[e])for(const[a,p]of Object.entries(o[e]))t.style[a]=p})},450),window.setTimeout(()=>{app.portrait.removeAttribute("style")},500))},getSVG=async t=>fetch(`./assets/${t}.svg`).then(t=>t.text()).then(t=>t),modSVG=(t,e=!1)=>{switch(t){case"lucas":switch(e){case"thumbsUp":case"wave":case"defaultArms":const t=document.querySelector(".lucas__arm--right"),o="thumbsUp"===e?"60,190 80,190 80,240 10,240 10,210 20,210 20,200 30,200 30,220 60,220":"wave"===e?"60,190 20,190 20,100 40,100 40,110 50,110 50,130 40,130 40,170 60,170":"60,190 80,190 80,290 60,290 60,280 50,280 50,260 60,260";t.removeAttribute("points"),t.setAttribute("points",o);break;case"workout":const a=document.createElementNS("http://www.w3.org/2000/svg","polygon");a.classList.add("pixel--red"),a.setAttribute("points","70,30 170,30 170,50 70,50"),document.querySelector(".lucas__head").appendChild(a);const p=document.querySelector(".lucas__torso polygon");p.classList.forEach(t=>p.classList.remove(t)),p.classList.add("pixel--red");const s=document.querySelector(".lucas__legs");document.querySelector(".lucas__legs polygon").setAttribute("points","80,260 160,260 160,320 130,320 130,290 110,290 110,320 80,320");const i=document.createElementNS("http://www.w3.org/2000/svg","polygon");i.classList.add("pixel--skin"),i.setAttribute("points","160,320 160,380 140,380 140,320"),s.appendChild(i);const n=document.createElementNS("http://www.w3.org/2000/svg","polygon");n.classList.add("pixel--skin"),n.setAttribute("points","100,320 100,380 80,380 80,320"),s.appendChild(n);const r=document.querySelectorAll(".lucas__shoes polygon"),l={110:"100",130:"140"};r.forEach(t=>{let e=t.getAttribute("points");t.setAttribute("points",e.replace(/110|130/g,t=>l[t]))})}}},resetSVG=t=>{const e="button--"===t.slice(0,8)?app.svg.buttons[t.slice(8)]:app.svg[t],o=document.querySelector(`#svg--${t}`),a=o.parentNode;if(a.childElementCount>1){const t=o.nextElementSibling;a.removeChild(o);const p=document.createElement("div");p.innerHTML=e,a.insertBefore(p.firstElementChild,t)}else a.innerHTML=e};